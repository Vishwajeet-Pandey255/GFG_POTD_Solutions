class Solution {
    public static ArrayList<Integer> subsetXOR(int n) {
        ArrayList<Integer> result = new ArrayList<>();

        // Step 1: Compute XOR from 1 to n
        int totalXor = xorUpto(n);

        // Step 2: Find the number to remove
        int remove = totalXor ^ n;

        // If remove is invalid, include all numbers 1..n
        if (remove < 1 || remove > n) {
            for (int i = 1; i <= n; i++) result.add(i);
            return result;
        }

        // Step 3: Otherwise include all except 'remove'
        for (int i = 1; i <= n; i++) {
            if (i != remove) result.add(i);
        }

        return result;
    }

    // Function to compute XOR of range 1 to x
    private static int xorUpto(int x) {
        if (x % 4 == 0) return x;
        if (x % 4 == 1) return 1;
        if (x % 4 == 2) return x + 1;
        return 0;
    }
}
